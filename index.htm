<html>
  <head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">

	<script type="text/javascript" src="https://unpkg.com/papaparse@4.6.3/papaparse.min.js"></script>

	<!-- script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script -->


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

	 const url_dadosCSV = 'https://raw.githubusercontent.com/specialisterne-br/observatorio-dados/master/exemplos01/exemplo01-bom.csv'
	 const url_allowCORS = 'https://cors-anywhere.herokuapp.com/'

	 google.charts.load("current", {packages:["corechart"]});

	 Papa.parse(url_allowCORS + url_dadosCSV, {
		  download: true,
		  dynamicTyping: true,
		  complete: function(results) {
				let head = results.data.shift()
				//console.log("Finished:", results.data)
				google.charts.setOnLoadCallback(
					() => drawChart_histo(results.data,head)

				);
		  }
	 })

     function drawChart_histo(myData,head) {
        //alert("DEBUG")
		var data = new google.visualization.DataTable();
		data.addColumn('string', head[0]); //  ex. T
		data.addColumn('number', head[1]);  // ex. C
		data.addRows(
			myData.map(  (x) => [String(x[0]), x[1]]  )
		);

		var options = {
		  title: 'Histograma de T (minutos por consumidor)',
		  legend: { position: 'none' },
		  vAxis:{title: 'Quantidade de registros', titleTextStyle:{color: '#444'}},
		  hAxis:{title: 'T', titleTextStyle:{color: '#444'}}

		};

	   var chart = new google.visualization.Histogram(document.getElementById('chart_hist1'));
	   chart.draw(data, options);
	 }

     function drawChart_tab(myData,head) {
        //alert("DEBUG")
		var data = new google.visualization.DataTable();
		data.addColumn('string', head[0]); //  ex. T
		data.addColumn('number', head[1]);  // ex. C
		data.addRows(
			myData.map(  (x) => [String(x[0]), x[1]]  )
		);

		var options = {
		  title: 'Histograma de T (minutos por consumidor)',
		  legend: { position: 'none' },
		  vAxis:{title: 'Quantidade de registros', titleTextStyle:{color: '#444'}},
		  hAxis:{title: 'T', titleTextStyle:{color: '#444'}}

		};

	   var chart = new google.visualization.Histogram(document.getElementById('chart_hist1'));
	   chart.draw(data, options);
	 }

    </script>

    <style>
		div.chartbox {width:100%;min-height: 520px;}
		@media screen and (max-width: 500px) {
			h1, h2, h3 {font-size:130%}
			div.chartbox {min-height: 180px;}
		}
   </style>
  </head>
  <body>
  <h1> Histograma e tabela do exemplo 1.1</h1>
	Visualizando <a href="https://pt.wikiversity.org/wiki/Observat%C3%B3rio_de_dados/BI/Exemplo/1.1" target="_blanck">exemplo 1.1</a> com
<a href="https://pt.wikiversity.org/wiki/Observat%C3%B3rio_de_dados/BI/G-Charts" target="_blanck">G-Charts</a>.

    <div class="chartbox" id="chart_hist1"></div>

	<div class="chartbox" id="charchart_tab1">
	Visualizador de tabela em construção
	</div>

  </body>
</html>
